<div class="container">
  <div class="row">
    <div class="col-10 mx-auto">
      <h2><%= user == current_user ? "Ma Watchlist" : "La Watchlist de #{user.username}" %></h2>
    </div>
  </div>
  <div class="row">
    <div class="col-10 mx-auto">
      <div class="seen">
        <h4>à voir</h4>
        <% unseen_interests.each do |interest| %>
          <div class="card_interest">
            <div class="d-flex">
              <%= image_tag interest.movie.poster %>
              <div class="info">
                <h2><%= interest.movie.title %></h2>
                <p><i class="fa-brands fa-imdb"></i> <%= interest.movie.imdb_rating %>/10</p>
                <p>
                  <i class="fa-solid fa-film"></i>
                  <% if interest.movie.movie_shows.empty? %>
                    <span>Pas de séances prévu</span>
                  <% else %>
                    <%= link_to "Voir des séances !", movie_path(interest.movie) %>
                  <% end %>

                </p>
                <p class="date-added">Ajouté il y a <%= time_ago_in_words(interest.movie.created_at) %></p>
              </div>
            </div>

            <div class="options">
              <% if interest.user == current_user %>

                 <%= simple_form_for interest do |f| %>
                  <%= f.input :seen, as: :hidden, input_html: { value: true } %>
                  <%= button_tag type: 'submit', class: "btn btn-primary", id: "register-button" do %>
                    <i class="fa-solid fa-check" aria-hidden="true"></i>
                  <% end %>
                <% end %>

                <%= link_to interest_path(interest), data: {turbo_method: :delete, turbo_confirm: "Do you really want to delete #{interest.movie.title} from your Watchlist?"} do %>
                  <button class="btn btn-danger"><i class="fa-solid fa-trash"></i></button>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="unseen">
        <h4>Vu</h4>
        <% seen_interests.each do |interest| %>
          <div class="card_interest">
            <div class="d-flex">
              <%= image_tag interest.movie.poster %>
              <div class="info">
                <h2><%= interest.movie.title %></h2>
                <p><i class="fa-brands fa-imdb"></i> <%= interest.movie.imdb_rating %>/10</p>
                <p>
                  <i class="fa-solid fa-film"></i>
                  <% if interest.movie.movie_shows.empty? %>
                    <span>Pas de séances prévu</span>
                  <% else %>
                    <%= link_to "Voir des séances !", movie_path(interest.movie) %>
                  <% end %>

                </p>
                <p class="date-added">Ajouté il y a <%= time_ago_in_words(interest.movie.created_at) %></p>
              </div>
            </div>

            <div class="options">
              <% if interest.user == current_user %>
                <%= simple_form_for interest do |f| %>
                  <%= f.input :seen, as: :hidden, input_html: { value: false } %>
                  <%= button_tag type: 'submit', class: "btn btn-primary", id: "register-button" do %>
                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                  <% end %>
                <% end %>

                <%= link_to interest_path(interest), data: {turbo_method: :delete, turbo_confirm: "Do you really want to delete #{interest.movie.title} from your Watchlist?"} do %>
                  <button class="btn btn-danger"><i class="fa-solid fa-trash"></i></button>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
